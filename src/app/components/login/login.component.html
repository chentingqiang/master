<div class="full-page-bg">
  <h1>斑马酒仓WMS管理系统</h1>
</div>
<div class="containers">
  <div class="left-logo">
    <img src="./assets/logo/200-200.png" alt="">
  </div>
  <div id="login-box">
    <div class="login-header">用户登录</div>
    <form nz-form [formGroup]="validateForm" class="login-form" (ngSubmit)="login()">
      <nz-form-item>
        <nz-form-control>
          <nz-input-group [nzPrefix]="prefixUser">
            <input type="text" nz-input formControlName="account" placeholder="请输入账号" />
          </nz-input-group>
          <nz-form-explain *ngIf="validateForm.get('account')?.dirty && validateForm.get('account')?.errors">
            账户格式：3到16位（字母，数字或下划线）
          </nz-form-explain>
        </nz-form-control>
      </nz-form-item>
      <nz-form-item>
        <nz-form-control>
          <nz-input-group [nzPrefix]="prefixLock" [nzSuffix]="suffixLock">
            <input [type]="passwordVisible ? 'text' : 'password'" nz-input formControlName="password"
              placeholder="请输入密码" />
          </nz-input-group>
          <nz-form-explain *ngIf="validateForm.get('password')?.dirty && validateForm.get('password')?.errors">
            密码格式：6到20位（字母，数字）
          </nz-form-explain>
        </nz-form-control>
      </nz-form-item>
      <nz-form-item>
        <nz-form-control>
          <nz-select formControlName="companyId" nzPlaceHolder="请选择公司" nzAllowClear nzShowSearch
            (ngModelChange)="selectRoles($event)">
            <nz-option *ngFor="let item of companyList" [nzLabel]="item.companyName" [nzValue]="item.id">
            </nz-option>
          </nz-select>
        </nz-form-control>
      </nz-form-item>
      <nz-form-item>
        <nz-form-control>
          <nz-select formControlName="companyRoleId" nzPlaceHolder="请选择角色" nzAllowClear nzShowSearch>
            <nz-option *ngFor="let item of roleList" [nzLabel]="item.companyRoleName" [nzValue]="item.id">
            </nz-option>
          </nz-select>
        </nz-form-control>
      </nz-form-item>
      <nz-form-item>
        <nz-form-control>
          <!-- <label nz-checkbox formControlName="remember">
            <span>记住密码?</span>
          </label> -->
          <button nz-button class="login-form-button" [nzType]="'primary'" [nzLoading]="load.isLoading">登录</button>
        </nz-form-control>
      </nz-form-item>
    </form>
    <div class="login-footer">
      <small>Copyright © 2019 <i>Apollo-wms.com</i> All rights reserved</small>
    </div>
  </div>
</div>
<ng-template #prefixUser><i nz-icon type="user"></i></ng-template>
<ng-template #suffixUser>
  <i style="cursor: pointer;" nz-icon nz-tooltip nzTitle="格式：4到16位（字母，数字或下划线）" type="info-circle"></i>
</ng-template>
<ng-template #prefixLock><i nz-icon type="lock"></i></ng-template>
<ng-template #suffixLock>
  <i style="cursor: pointer;" nz-icon [nzType]="passwordVisible ? 'eye-invisible' : 'eye'"
    (mousedown)="passwordVisible = !passwordVisible" (mouseup)="passwordVisible = !passwordVisible"></i>
</ng-template>